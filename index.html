<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1" />
    <title>Cellula</title>
    <!--Base for github pages-->
    <base href="./" target="_blank" />
    <!--Import Resources-->
    <link rel="icon" type="image/x-icon" href="./images/favicon.ico" />
    <link rel="stylesheet" href="./css/styles.css" />
    <link rel="stylesheet" href="./css/toolbar.css" />
    <link rel="stylesheet" href="./css/windows.css" />
    <link rel="stylesheet" href="./css/selector.css" />
    <link rel="stylesheet" href="./css/settings.css" />
    <!--GPU.js CDN-->
    <script src="https://cdn.jsdelivr.net/npm/gpu.js@2.10.1/dist/gpu-browser.min.js"></script>
    <!--Pixelify Sans Font-->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet" />
    <script>
        let FFOUC_FIX;
    </script>
</head>

<body>
    <div id="toolbar">
        <p id="app-title">Cellula</p>
        <!--Automata window trigger-->
        <div class="dropdown window-trigger">
            <button class="dropbtn triggerbtn" id="automata-btn">Life</button>
        </div>
        <!--Settings window trigger-->
        <div class="dropdown window-trigger">
            <button class="dropbtn triggerbtn" id="settings-btn">Settings</button>
        </div>
        <!--File dropdown-->
        <div class="dropdown">
            <button class="dropbtn">File</button>
            <div class="dropdown-content">
                <!--TODO: Replace these with proper shortcuts-->
                <button class="dropdown-option">
                    <span class="option-name">Save</span>
                    <span class="option-shortcut">S</span>
                </button>
                <!--TODO: This should open a window-->
                <button class="dropdown-option">
                    <span class="option-name">Load</span>
                    <span class="option-shortcut">V</span>
                </button>
            </div>
        </div>
        <!--Controls dropdown-->
        <div class="dropdown">
            <button class="dropbtn">Controls</button>
            <div class="dropdown-content">
                <p>View</p>
                <button class="dropdown-option">
                    <span class="option-name">Toggle Toolbar</span>
                    <span class="option-shortcut">Esc</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Step</span>
                    <span class="option-shortcut">.</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Pause/Unpause</span>
                    <span class="option-shortcut">Space/P</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Randomize Grid</span>
                    <span class="option-shortcut">Tab/R</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Higher Delay</span>
                    <span class="option-shortcut">+</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Lower Delay</span>
                    <span class="option-shortcut">-</span>
                </button>
                <p>Pen</p>
                <button class="dropdown-option">
                    <span class="option-name">Higher Fill Amt</span>
                    <span class="option-shortcut">ArrowUp</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Lower Fill Amt</span>
                    <span class="option-shortcut">ArrowDown</span>
                </button>
                <button class="dropdown-option">
                    <span class="option-name">Change Pen Fill</span>
                    <span class="option-shortcut">Shift</span>
                </button>
            </div>
        </div>
        <!--Console-->
        <p id="console-container">
            Â»
            <span id="console">Welcome to Cellula!
            </span>
        </p>
    </div>
    <!--! Draggable Automata Select -->
    <div id="automata" class="window">
        <div id="automata-header" class="window-header">
            <span class="window-title">Select Automata</span>
            <span class="window-delete">X</span>
        </div>
        <div id='automata-content' class='window-content'>
            <!--Buttons for selection-->
            <div class="sidenav">
                <p>Discrete Automata</p>
                <button class="select-btn selected">Life</button>
                <button class="select-btn">Brian's Brain</button>
                <button class="select-btn">Wireworld</button>
                <button class="select-btn">Rock, Paper, Scissors</button>
            </div>
            <!--Content for Life-->
            <div id="life-info" class="side-content">
                <h1>Game of Life</h1>
                <img src="./images/Life.gif" alt="Life GIF">
                <h2>Description</h2>
                <p>
                    Conway's Game of Life (GoL) is a zero-player game, where the evolution of the game board depends
                    only on the state of the board.
                    It is the best known example of a cellular automaton. To interact with the game, you can create an
                    initial configuration and see how it evolves,
                    pausing or stepping through the states of the board. Interestingly, the GoL is turing-complete and
                    can simulate a universal constructor or any other turing machine.
                </p>
                <h2>Rules</h2>
                <p>The GoL has cells in 2 states, alive and dead. The evolution of a cell depends on its 8
                    neighbors. For the GoL, the below are the rules:</p>
                <ul>
                    <li>A dead cell comes alive if it has exactly 3 neighbors</li>
                    <li>A live cell survives only if it has 2 or 3 neighbors</li>
                </ul>
                <p>The above rules can be represented by the rulestring B3/S23. Life-like automata are a class of
                    automata which can be represented by such rulestring. For example, the automata "HighLife" is
                    represented by B36/S23, where birth occurs when a cell has 3 or 6 neighbors, and survival occurs
                    when a live cell has 2 or 3 neighbors.</p>
                <h2>Additional Info</h2>
                <p>This simulator has been modified to allow for modification of the neighborhoods for life-like
                    automata. For automata with neighborhoods of size greater than 10, numbers in rulestrings can be
                    wrapped in brackets [Example: B1(10)/S2(10)].</p>
                <p>Click here for more info on <a href="https://conwaylife.com/wiki/Rulestring">rulestrings</a> and
                    <a href="https://conwaylife.com/wiki/List_of_Life-like_rules">life-like automata</a>.
                </p>
            </div>
            <!--Content for Brian's Brain-->
            <div id="brain-info" class="side-content">
                <h1>Brian's Brain</h1>
                <img src="./images/BrianBrain.gif" alt="Brian's Brain GIF">
                <h2>Description</h2>
                <p>
                    Brian's Brain is an extension of the "Seeds" lifelike automata (B2/S) to 3 states. Because of the
                    automaton's name, it can be linkened to a brain and each cell likened to a neuron. The 3 states
                    of the cells are named approppriately (ready, firing, refactory). Brian's Brain displays the
                    interesting property where small patterns tend to blow up and almost all patterns are spaceships:
                    patterns which mvoe across the grid.
                </p>
                <h2>Rules</h2>
                <p>Brian's Brain has cells in 3 states, ready (neurons prepared to fire), firing (active neurons) and
                    refactory (neurons resting after firing). The evolution of a cell, similar to life-like automata,
                    depends on its 8 neighbors. Below are the rules:</p>
                <ul>
                    <li>A ready cell fires if it has exactly 2 firing neighbors</li>
                    <li>A firing cell always becomes refactory</li>
                    <li>A refactory cell always becomes ready</li>
                </ul>
                <p>This editor has been customized such that you can change the conditions on which a cell fires. The
                    rulestring "2/3/4" means a cell will fire if it has 2, 3 or 4 neighbors.</p>
            </div>
            <!--Content for Wireworld-->
            <div id="wire-info" class="side-content">
                <h1>Wireworld</h1>
                <img src="./images/Wireworld.gif" alt="Wireworld GIF">
                <h2>Description</h2>
                <p>Wireworld is a 4-state cellular automata operating in a 2-d neighborhood with a Moore neighborhood (8
                    direct neighbors). Wireworld is especially suited for simulating digital electronic circuits as ot
                    has
                    been defined similarly to how a circuit behaves. Unlike conventional life-like cellular automata,
                    the evolution of Wireworld is constrained to only onccur within wires/conductors. Given an infinite
                    2D plane, Wireworld is
                    turing-complete due to its ability to make logic gates.</p>
                <h2>Rules</h2>
                <p>Wireworld has 4 states: empty, electron head, electron tail, and conductor, similar to components of
                    a circuit. Below are its rules:</p>
                <ul>
                    <li>Empty cells always stay as empty cells</li>
                    <li>Electron heads always become electron tails</li>
                    <li>Electron tails always become conductors</li>
                    <li>Conductors become electron tails if they have exactly 1 or 2 electron head neighbors</li>
                </ul>
                <h2>Additional Info</h2>
                <p>Wireworld can make complex mechanisms such as logic gates, 8-bit multipliers and adders, clocks and
                    even displays. For a list of interesting components, click <a
                        href="https://demonstrations.wolfram.com/WireWorldGatesAndGadgets/">here</a>.</p>
            </div>
            <!--Content for Rock, Paper, Scissors-->
            <div id="rps-info" class="side-content">
                <h1>Rock, Paper, Scissors</h1>
                <img src="./images/Life.gif" alt="Life GIF">
            </div>
        </div>
    </div>
    <!--! Draggable Settings -->
    <div id="settings" class="window">
        <div id="settings-header" class="window-header">
            <span class="window-title">Settings</span>
            <span class="window-delete">X</span>
        </div>
        <!--Content for Settings-->
        <div id="settings-window-content" class='window-content'>
            <!--Settings for GoL-->
            <div id="life-settings" class="automata-settings">
                <div class="rule-div">
                    <label for="life-rule-input">Rulestring</label>
                    <p class="desc">B/S rulestring. See "Select Automata" window for details.</p>
                    <input type="text" id="life-rule-input" name="life-rule-input" placeholder="B/S Rulestring"
                        value="B3/S23" />
                </div>
            </div>
            <!--Settings for Brian's Brain-->
            <div id="brain-settings" class="automata-settings">
                <div class="rule-div">
                    <label for="rule-input">Rulestring</label>
                    <p class="desc">Number of neighbors for survival, separated by slash (/). Example: 2/3</p>
                    <input type="text" id="brain-rule-input" name="rule-input" placeholder="2/3/etc." value="'2/3" />
                </div>
            </div>
            <!--Settings for Wireworld-->
            <div id="wire-settings" class="automata-settings">
                <p>No settings available for Wireworld</p>
            </div>
            <!--Settings for Rock Paper Scissors-->
            <div id="rps-settings" class="automata-settings">
                <div class="rule-div">
                    <label for="rule-input">Rulestring</label>
                    <p class="desc">A cell will be converted if it has more than these many neighbors which beat it</p>
                    <input type="text" id="rps-rule-input" name="rule-input" placeholder="3" value="3" min="1" />
                </div>
                <div class="rule-div">
                    <label for="rps-state-select">Number of States</label>
                    <p class="desc">Number of states in the game. Lizard and Spock can be added as extra states</p>
                    <div class="dropdown select-dropdown" name="rps-state-select" id="rps-state-select">
                        <button class="dropbtn selectbtn">State Select</button>
                        <div class="dropdown-content">
                            <!--TODO: Replace these with proper shortcuts-->
                            <button class="dropdown-option">
                                <span class="option-name">Save</span>
                                <span class="option-shortcut">S</span>
                            </button>
                            <!--TODO: This should open a window-->
                            <button class="dropdown-option">
                                <span class="option-name">Load</span>
                                <span class="option-shortcut">V</span>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!--!Draggeable File Load-->
    <div id="load" class="window">
        <div id="load-header" class="window-header">
            <span class="window-title">Load File</span>
            <span class="window-delete">X</span>
        </div>
        <p>Content</p>
    </div>
    <canvas id="cellGrid"></canvas>
    <script type="module" src="./js/automata.js"></script>
    <script type="module" src="./js/input/userInput.js"></script>
    <script type="module" src="./js/input/selector.js"></script>
    <script type="module" src="./js/input/settings.js"></script>
</body>

</html>