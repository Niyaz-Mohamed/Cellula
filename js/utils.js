export function unique2DArr(t){for(var r=[],n={},e=0;e<t.length;e++){var o=JSON.stringify(t[e]);n[o]||(r.push(t[e]),n[o]=!0)}return r}export function padArray(t,r,n){return t.length<r?[...t,...Array(r-t.length).fill(n)]:t}export function midpointCircle(t,r,n){if(n<0)return[];let e=[],o=n-1,a=0,i=1-n;for(;o>=a;)e.push([t+o,r+a],[t-o,r+a],[t+o,r-a],[t-o,r-a],[t+a,r+o],[t-a,r+o],[t+a,r-o],[t-a,r-o]),a++,i<=0?i=i+2*a+1:(o--,i=i+2*a-2*o+1);return unique2DArr(e)}export function fillCircle(t,r,n){if(n<0)return[];let e=[],o=++n-1,a=0,i=1-n;for(;o>=a;){let n=Array.from({length:2*o+1},((n,e)=>[t+(e-o),r+a])),u=Array.from({length:2*a+1},((n,e)=>[t+(e-a),r+o])),h=Array.from({length:2*o+1},((n,e)=>[t+(e-o),r-a])),l=Array.from({length:2*a+1},((n,e)=>[t+(e-a),r-o]));e.push(...n.concat(u,h,l)),a++,i<=0?i=i+2*a+1:(o--,i=i+2*a-2*o+1)}return unique2DArr(e)}export function mooreNeighborhood(t=1,r=!1){let n=[];for(let e=-t;e<=t;e++)for(let o=-t;o<=t;o++)0!=e||0!=o?n.push([e,o]):r&&n.push([0,0]);return n}export function vonNeumannNeighborhood(t=1){let r=[];for(let n=-t;n<=t;n++)for(let e=-t;e<=t;e++)n+e<=t&&(0!=n||0!=e)&&r.push([n,e]);return r}export function setConsoleText(t){document.getElementById("console").innerText=t}export function getConsoleText(){return document.getElementById("console").innerText}export function downloadObjectAsJSON(t,r){const n=JSON.stringify(t,null,2),e=new Blob([n],{type:"application/json"});if(window.navigator.msSaveOrOpenBlob)window.navigator.msSaveBlob(e,r);else{const t=window.document.createElement("a");t.href=window.URL.createObjectURL(e),t.download=r,document.body.appendChild(t),t.click(),document.body.removeChild(t)}}export function reshape2DArray(t,r,n,e=0,o=null){const a=Array.from({length:r},(()=>Array(n).fill(o?o():e)));for(let e=0;e<Math.min(t.length,r);e++)for(let r=0;r<Math.min(t[e].length,n);r++)a[e][r]=t[e][r];return a}export function genShieldedFunction(t){return r=>t(r)}export function gaussianRandom(t,r){let n=Math.random(),e=Math.random(),o=Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*e);return t+Math.sqrt(r)*o}export function stripStringToDecimal(t){return t=t.replace(/[^0-9.-]/g,"").replace(/(?!^)-/g,"").replace(/(?<=\..*)\./g,"")}export function packRGB(t){return(t=t.map((t=>Math.min(Math.max(t,0),255))))[0]<<16|t[1]<<8|t[2]}export function unpackRGB(t){return[t>>16&255,t>>8&255,255&t]}export function shiftHue(t,r=0){const[n,e,o]=t,a=Math.cos(r*Math.PI/180),i=Math.sin(r*Math.PI/180),u=[[a+(1-a)/3,1/3*(1-a)-Math.sqrt(1/3)*i,1/3*(1-a)+Math.sqrt(1/3)*i],[1/3*(1-a)+Math.sqrt(1/3)*i,a+1/3*(1-a),1/3*(1-a)-Math.sqrt(1/3)*i],[1/3*(1-a)-Math.sqrt(1/3)*i,1/3*(1-a)+Math.sqrt(1/3)*i,a+1/3*(1-a)]],h=n*u[0][0]+e*u[0][1]+o*u[0][2],l=n*u[1][0]+e*u[1][1]+o*u[1][2],c=n*u[2][0]+e*u[2][1]+o*u[2][2];return[Math.round(Math.max(Math.min(h,255),0)),Math.round(Math.max(Math.min(l,255),0)),Math.round(Math.max(Math.min(c,255),0))]}export function rgbToHsv(t){const[r,n,e]=t.map((t=>t/255));let o=Math.max(r,n,e),a=Math.min(r,n,e),[i,u,h]=[o,o,o],l=o-a;if(u=0==o?0:l/o,0==l)i=0;else{switch(o){case r:i=(n-e)/l+(n<e?6:0);break;case n:i=(e-r)/l+2;break;case e:i=(r-n)/l+4}i*=60}return[i,u,h]}export function hsvToRgb(t){const[r,n,e]=t,o=e*n,a=o*(1-Math.abs(r/60%2-1)),i=e-o;return{0:[o,a,0],1:[a,o,0],2:[0,o,a],3:[0,a,o],4:[a,0,o],5:[o,0,a]}[Math.floor(r/60)%6].map((t=>Math.round(255*(t+i))))}export function fadeRGB(t,r){return t[0]+t[1]+t[2]<20?[0,0,0]:t.map((t=>Math.floor(t*r)))}